<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/bg01.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/bg01.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"merr0r.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":null,"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="2022-09-22 ~ 2022-10-30">
<meta property="og:type" content="article">
<meta property="og:title" content="First Study Record of internship">
<meta property="og:url" content="https://merr0r.github.io/2022/09/22/internship01/index.html">
<meta property="og:site_name" content="MErr0rのBlog">
<meta property="og:description" content="2022-09-22 ~ 2022-10-30">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/led_01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/led_02.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/led_03.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/led_04.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/led_05.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/led_06.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/led_06.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/cStudy01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/cStudy02.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/cStudy03.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/cStudy05.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/MyLinkedList01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList02.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList03.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList04.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList04.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/LinkedList05.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/1.2_Setup_sources01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/1.2_Setup_sources02.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/1.3_02.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/1.4Installation.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/1.6Dependencies.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/TopicRos01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/ShenGu_DownLoad01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/ShenGu_DownLoad02.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/ShenGu_DownLoad03.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/ShenGu_DownLoad04.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/ShenGu_DownLoad05.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/ShenGu_DownLoad06.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/ShenGu_DownLoad07.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/OtherQuestion01.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/OtherQuestion02.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/OtherQuestion03.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/OtherQuestion04.jpg">
<meta property="og:image" content="https://merr0r.github.io/2022/09/22/internship01/OtherQuestion05.jpg">
<meta property="article:published_time" content="2022-09-21T16:00:00.000Z">
<meta property="article:modified_time" content="2022-11-26T08:02:17.976Z">
<meta property="article:author" content="MErr0r">
<meta property="article:tag" content="leetcode">
<meta property="article:tag" content="公司实习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://merr0r.github.io/2022/09/22/internship01/led_01.jpg">


<link rel="canonical" href="https://merr0r.github.io/2022/09/22/internship01/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://merr0r.github.io/2022/09/22/internship01/","path":"2022/09/22/internship01/","title":"First Study Record of internship"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>First Study Record of internship | MErr0rのBlog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">MErr0rのBlog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">I turn the page to drown you out</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AD%A6%E4%B9%A0"><span class="nav-number">1.</span> <span class="nav-text">嵌入式学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#GPIO%E4%BB%A5%E5%8F%8Aled%E5%8E%9F%E7%90%86%E5%9B%BE%E6%BC%94%E5%8F%98"><span class="nav-number">1.1.</span> <span class="nav-text">GPIO以及led原理图演变</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%8E%AF%E5%A2%83"><span class="nav-number">1.2.</span> <span class="nav-text">嵌入式环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%E7%BC%96%E7%A8%8B"><span class="nav-number">1.3.</span> <span class="nav-text">串口编程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84led%E9%A9%B1%E5%8A%A8%E7%BC%96%E7%A8%8B"><span class="nav-number">1.4.</span> <span class="nav-text">简单的led驱动编程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#C-%E5%AD%A6%E4%B9%A0"><span class="nav-number">2.</span> <span class="nav-text">C++学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#C-x2F-C-%E7%9F%A5%E8%AF%86"><span class="nav-number">2.1.</span> <span class="nav-text">C&#x2F;C++知识</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%B7%E5%88%AB%E5%90%8D%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%E6%9E%84%E9%80%A0"><span class="nav-number">2.1.1.</span> <span class="nav-text">起别名的结构体构造</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="nav-number">2.1.2.</span> <span class="nav-text">位运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#static%E9%9D%99%E6%80%81"><span class="nav-number">2.1.3.</span> <span class="nav-text">static静态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BD%A2%E5%8F%82%E4%B8%8E%E5%AE%9E%E5%8F%82"><span class="nav-number">2.1.4.</span> <span class="nav-text">形参与实参</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-number">2.1.5.</span> <span class="nav-text">构造函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%93%BE%E8%A1%A8"><span class="nav-number">2.2.</span> <span class="nav-text">链表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#707-%E8%AE%BE%E8%AE%A1%E9%93%BE%E8%A1%A8"><span class="nav-number">2.2.1.</span> <span class="nav-text">707. 设计链表</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A0%94%E4%BA%8C%E5%85%AC%E5%8F%B8%E5%AE%9E%E4%B9%A0"><span class="nav-number">3.</span> <span class="nav-text">研二公司实习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ros%E5%AE%89%E8%A3%85"><span class="nav-number">3.1.</span> <span class="nav-text">ros安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ros%E5%AD%A6%E4%B9%A0"><span class="nav-number">3.2.</span> <span class="nav-text">ros学习</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E4%B9%A0%E5%85%AC%E5%8F%B8%E8%B0%83%E8%AF%95%E5%AE%A4%E5%A4%96%E9%87%8D%E8%BD%BD%E7%A7%BB%E5%8A%A8%E8%BD%A6%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="nav-number">3.3.</span> <span class="nav-text">实习公司调试室外重载移动车步骤：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98"><span class="nav-number">4.</span> <span class="nav-text">其他问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%B5%E8%84%91%E5%8D%B8%E8%BD%BD%E6%97%A7matlab%E4%BA%A7%E7%94%9F%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">4.1.</span> <span class="nav-text">电脑卸载旧matlab产生的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#matlab%E4%BB%A3%E7%A0%81%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="nav-number">4.2.</span> <span class="nav-text">matlab代码乱码问题</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="MErr0r"
      src="/images/xhw.jpg">
  <p class="site-author-name" itemprop="name">MErr0r</p>
  <div class="site-description" itemprop="description">合工大研究僧</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/23497494?spm_id_from=333.1007.0.0" title="Bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;23497494?spm_id_from&#x3D;333.1007.0.0" rel="noopener" target="_blank"><i class="fab fa-bilibili fa-fw"></i>Bilibili</a>
      </span>
      <span class="links-of-author-item">
        <a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=519779083&website=www.oicqzone.com" title="QQ → tencent:&#x2F;&#x2F;AddContact&#x2F;?fromId&#x3D;45&amp;fromSubId&#x3D;1&amp;subcmd&#x3D;all&amp;uin&#x3D;519779083&amp;website&#x3D;www.oicqzone.com" rel="noopener" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://merr0r.github.io/2022/09/22/internship01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/xhw.jpg">
      <meta itemprop="name" content="MErr0r">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MErr0rのBlog">
      <meta itemprop="description" content="合工大研究僧">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="First Study Record of internship | MErr0rのBlog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          First Study Record of internship
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-22 00:00:00" itemprop="dateCreated datePublished" datetime="2022-09-22T00:00:00+08:00">2022-09-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-11-26 16:02:17" itemprop="dateModified" datetime="2022-11-26T16:02:17+08:00">2022-11-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">嵌入式</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>2022-09-22 ~ 2022-10-30</p>
<span id="more"></span>
<h1 id="嵌入式学习"><a href="#嵌入式学习" class="headerlink" title="嵌入式学习"></a>嵌入式学习</h1><h2 id="GPIO以及led原理图演变"><a href="#GPIO以及led原理图演变" class="headerlink" title="GPIO以及led原理图演变"></a>GPIO以及led原理图演变</h2><p>GPIO&#x3D;General Purpose Input Output，通用的输入输出接口，有时候称为“IO口”。</p>
<img src="/2022/09/22/internship01/led_01.jpg" class="" title="这是一张图片">
<p>最原始的led图，但是电流过大可能会烧坏二极管。</p>
<img src="/2022/09/22/internship01/led_02.jpg" class="" title="这是一张图片">
<p>增加保护电阻，但电子系统是不可能手动控制开关。</p>
<img src="/2022/09/22/internship01/led_03.jpg" class="" title="这是一张图片">
<p>通过编程，用芯片引脚控制发光二极管，有两种控制方法：<br>1、芯片输出3.3V，使二极管发光。<br>2、芯片输出0V，使二极管发光。<br>但有的芯片驱动为了省电，也就是引脚驱动能力不足，又加以改进。</p>
<img src="/2022/09/22/internship01/led_04.jpg" class="" title="这是一张图片">
<img src="/2022/09/22/internship01/led_05.jpg" class="" title="这是一张图片">
<p>通过编程，用芯片引脚控制发光二极管，有两种控制方法：<br>1、芯片输出1.2V，使二极管发光。<br>2、芯片输出0V，使二极管发光。<br>由此，引脚输出高低电平就能控制led。其中高电平为1，低电平为0.</p>
<h2 id="嵌入式环境"><a href="#嵌入式环境" class="headerlink" title="嵌入式环境"></a>嵌入式环境</h2><p>1、在Windows上用Source insight看Linux内核源码<br>2、用filezilla把我们需要运行的文件上传到虚拟机里运行的ubuntu系统里。<br>3、用mobaxterm远程操控ubuntu。<br>4、用mobaxterm操作开发板。</p>
<h2 id="串口编程"><a href="#串口编程" class="headerlink" title="串口编程"></a>串口编程</h2><p>开始位，数据位，校验位，停止位<br>驱动程序编写流程：<br>1、确定主设备号<br>2、定义自己的file_operations结构体<br>3、实现对应的open&#x2F;read&#x2F;write等函数，填入file_operations结构体<br>4、把file_operations结构体告诉结构体；注册驱动程序<br>5、安装驱动时，就回去调用这个出口函数<br>6、有入口函数就有出口函数：卸载程序时，就会去调用这个出口函数<br>7、提供设备信息，自动创建设备节点</p>
<h2 id="简单的led驱动编程"><a href="#简单的led驱动编程" class="headerlink" title="简单的led驱动编程"></a>简单的led驱动编程</h2><p>Step1:写下包含的头文件：</p>
<figure class="highlight stan"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">kernel.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">module.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">slab.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">init.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">fs.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">delay.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">poll.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">mutex.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">wait.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">linux</span>/<span class="string">uaccess.h</span>&gt;</span></span><br><span class="line"><span class="meta">#include &lt;<span class="string">asm</span>/<span class="string">io.h</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Step2:确定自己的入口函数以及出口函数：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 入口函数 */</span></span><br><span class="line">static <span class="built_in">int</span> __init led<span class="constructor">_init(<span class="params">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">static void __exit led<span class="constructor">_exit(<span class="params">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">module</span><span class="constructor">_init(<span class="params">led_init</span>)</span>;</span><br><span class="line"><span class="keyword">module</span><span class="constructor">_exit(<span class="params">led_exit</span>)</span>;</span><br><span class="line"><span class="constructor">MODULE_LICENSE(<span class="string">&quot;GPL&quot;</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>Step2:编写入口出口函数：<br>在入口函数通过register_chrdev向内核注册字符设备。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">register<span class="constructor">_chrdev(<span class="params">unsigned</span> <span class="params">int</span> <span class="params">major</span>, <span class="params">const</span> <span class="params">char</span> <span class="operator">*</span><span class="params">name</span>, <span class="params">const</span> <span class="params">struct</span> <span class="params">file_operations</span> <span class="operator">*</span><span class="params">fops</span>)</span></span><br></pre></td></tr></table></figure>
<p>其中unsigned int major为主设备号，当为0时内核会动态分配一个设备号。一个字符设备设备号分为主设备号和次设备号。主设备号是特定的驱动程序，次设备号是该程序的设备。比如我们要点两个led灯。主设备中的1为led驱动程序，次设备号1-2分别两个led设备；<br>const char *name为注册的设备名称；<br>const struct file_operations *fops为文件操作指针。它是设备号和系统操作之间的纽带，集成了系统操作所需要的一系列函数，每个成员就是一个系统调用，我们先读取fops结构体里的指针函数，接着把控制权交给指针函数。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">major</span> = register_chrdev(<span class="number">0</span>, <span class="string">&quot;100ask_led&quot;</span>, &amp;led_fops)<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>入口函数有注册主设备号，那么出口函数就有卸载主设备号</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unregister<span class="constructor">_chrdev(<span class="params">major</span>,<span class="string">&quot;100ask_led&quot;</span>,)</span>;</span><br></pre></td></tr></table></figure>
<p>编写入口出口函数的后面同时写上</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span><span class="constructor">_init(<span class="params">led_init</span>)</span>;</span><br><span class="line"><span class="keyword">module</span><span class="constructor">_exit(<span class="params">led_exit</span>)</span>;</span><br><span class="line"><span class="constructor">MODULE_LICENSE(<span class="string">&quot;GPL&quot;</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>其中module支撑驱动的加载与卸载。<br>Step3:编写file_operations结构体以及我们所需要的函数</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">struct</span> <span class="title class_">file_operations</span> led_fops = &#123;</span><br><span class="line">	.owner		= THIS_MODULE,</span><br><span class="line">	.write		= led_write,</span><br><span class="line">	.open		= led_open,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>file_operations是关联系统调用和驱动程序的关键结构体，这个结构每个成员都代表着系统调用。<br>Step4:编写结构体里的函数led_write。led_write的作用是设置gpio的寄存器，输出高低电平点亮或者熄灭led。驱动访问应用层数据需要借助辅助函数copy_to_user与copy_from_user。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">copy_from_user</span>(&amp;val, buf, <span class="number">1</span>);<span class="comment">//用户空间拷贝到内核空间，拷贝1个字节</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">ssize_t</span> <span class="title">led_write</span><span class="params">(<span class="keyword">struct</span> file *filp, <span class="type">const</span> <span class="type">char</span> __user *buf,</span></span></span><br><span class="line"><span class="params"><span class="function">			 <span class="type">size_t</span> count, <span class="type">loff_t</span> *ppos)</span></span></span><br><span class="line"><span class="function">			 </span>&#123;</span><br><span class="line">			 	<span class="type">char</span> val;</span><br><span class="line">			 	<span class="comment">/* copy_from_user : get data from app */</span></span><br><span class="line">				<span class="built_in">copy_from_user</span>(&amp;val, buf, <span class="number">1</span>);<span class="comment">//用户空间拷贝到内核空间，拷贝1个字节</span></span><br><span class="line">				</span><br><span class="line">				<span class="comment">/* to set gpio register: out 1/0 */</span></span><br><span class="line">				<span class="keyword">if</span>(val)&#123;</span><br><span class="line"></span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			 &#125;</span><br></pre></td></tr></table></figure>
<p>Step5:编写结构体里的函数led_open。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">static <span class="built_in">int</span> led<span class="constructor">_open(<span class="params">struct</span> <span class="params">inode</span> <span class="operator">*</span><span class="params">inode</span>, <span class="params">struct</span> <span class="params">file</span> <span class="operator">*</span><span class="params">filp</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们最后的目标是让引脚输出电平，led发光，但led是硬件。led_open的作用是驱动硬件，驱动硬件的前提需要访问硬件的地址，所以我们可以在入口函数通过ioremap把所有的硬件的物理地址全都映射成虚拟地址，之后就能驱动led的点亮与熄灭。如果让引脚输出电平，涉及到的硬件流程为：<br>1、使能PLL。寄存器RCC_PLL4CR地址： 0x50000000 + 0x894</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *RCC_PLL4CR;</span><br></pre></td></tr></table></figure>
<p>2、使能GPIO。<br>寄存器RCC_MP_AHB4ENSETR 地址： 0x50000000 + 0xA28</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *RCC_MP_AHB4ENSETR;</span><br></pre></td></tr></table></figure>
<p>3、设置PA10，用作输出<br>寄存器GPIO_MODER 地址： 0x50002000 + 0x00</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *GPIO_MODER;</span><br></pre></td></tr></table></figure>
<p>4、设置输出电平<br>寄存器GPIO_BSRR 地址： 0x50002000 + 0x18</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *GPIO_BSRR;</span><br></pre></td></tr></table></figure>
<p>在入口出口函数处理物理地址。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">static <span class="built_in">int</span> __init led<span class="constructor">_init(<span class="params">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	printk(<span class="string">&quot;%s %s %d\n&quot;</span>, __FILE__ , __FUNCTION__,__LINE__);</span><br><span class="line">	major = register<span class="constructor">_chrdev(0, <span class="string">&quot;100ask_led&quot;</span>, &amp;<span class="params">led_fops</span>)</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* ioremap(base_phy, size); */</span></span><br><span class="line">	<span class="comment">//RCC_PLL4CR地址： 0x50000000 + 0x894</span></span><br><span class="line">	RCC_PLL4CR = ioremap(<span class="number">0x50000000</span> + <span class="number">0x894</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//RCC_MP_AHB4ENSETR 地址： 0x50000000 + 0xA28</span></span><br><span class="line">	RCC_MP_AHB4ENSETR = ioremap(<span class="number">0x50000000</span> + <span class="number">0xA28</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//GPIO_MODER 地址： 0x50002000 + 0x00</span></span><br><span class="line">	GPIO_MODER = ioremap(<span class="number">0x50002000</span> + <span class="number">0x00</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//GPIO_BSRR 地址： 0x50002000 + 0x18</span></span><br><span class="line">	GPIO_BSRR = ioremap(<span class="number">0x50002000</span> + <span class="number">0x18</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	led_class = <span class="keyword">class</span><span class="constructor">_create(THIS_MODULE, <span class="string">&quot;myled&quot;</span>)</span>;</span><br><span class="line">	device<span class="constructor">_create(<span class="params">led_class</span>, NULL, MKDEV(<span class="params">major</span>, 0)</span>, NULL, <span class="string">&quot;myled&quot;</span>);<span class="comment">//能创建/led/myled的设备节点</span></span><br><span class="line">	</span><br><span class="line">	return <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">static void __exit led<span class="constructor">_exit(<span class="params">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	iounmap(RCC_PLL4CR);</span><br><span class="line">	iounmap(RCC_MP_AHB4ENSETR);</span><br><span class="line">	iounmap(GPIO_MODER);</span><br><span class="line">	iounmap(GPIO_BSRR);</span><br><span class="line">	</span><br><span class="line">	device<span class="constructor">_destroy(<span class="params">led_class</span>, MKDEV(<span class="params">major</span>, 0)</span>);</span><br><span class="line">	<span class="keyword">class</span><span class="constructor">_destroy(<span class="params">led_class</span>)</span>;</span><br><span class="line"></span><br><span class="line">	unregister<span class="constructor">_chrdev(<span class="params">major</span>, <span class="string">&quot;100ask_led&quot;</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Step5:完善函数led_open与led_write。输出电平的步骤：<br>1、使能PLL。翻开手册需要把第一位修改成1，当第二位为1时候代表寄存器稳定。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*RCC_PLL4CR |= (1&lt;&lt;<span class="string">0); </span></span><br><span class="line"><span class="string">while((*RCC_PLL4CR &amp; (1&lt;&lt;1)) == 0</span>);</span><br></pre></td></tr></table></figure>
<p>2、使能GPIO。我们通过RCC_MP_AHB4ENSETR使用GPIO。</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*RCC_MP_AHB4ENSETR <span class="string">|= (1&lt;&lt;0);</span></span><br></pre></td></tr></table></figure>
<img src="/2022/09/22/internship01/led_06.jpg" class="" title="这是一张图片">
<img src="/2022/09/22/internship01/led_06.jpg" class="" title="这是一张图片">
<p>3、由上图可知开发板上2个LED灯用到了PA10和PG8 2个引脚，我们驱动PA10，只需要设置b[21:20]为1就可以配置GPIOA_IO10为输出模式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*GPIO_MODER &amp;= ~(3&lt;&lt;<span class="string">20);</span></span><br><span class="line"><span class="string">*GPIO_MODER |= ~(1&lt;&lt;20</span>);</span><br></pre></td></tr></table></figure>
<p>led_open函数就完成了：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">static <span class="built_in">int</span> led<span class="constructor">_open(<span class="params">struct</span> <span class="params">inode</span> <span class="operator">*</span><span class="params">inode</span>, <span class="params">struct</span> <span class="params">file</span> <span class="operator">*</span><span class="params">filp</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/* enable PLL4,it is clock source for all gpio */</span></span><br><span class="line">	*RCC_PLL4CR <span class="pattern-match">|= (1&lt;&lt;0);</span></span><br><span class="line"><span class="pattern-match">	<span class="keyword">while</span>((<span class="operator">*</span><span class="constructor">RCC_PLL4CR</span> &amp; (1&lt;&lt;1)) <span class="operator">==</span> 0);</span></span><br><span class="line"><span class="pattern-match">	</span></span><br><span class="line"><span class="pattern-match">	<span class="operator">/</span><span class="operator">*</span> enable gpio <span class="operator">*</span><span class="operator">/</span></span></span><br><span class="line"><span class="pattern-match">	<span class="operator">*</span><span class="constructor">RCC_MP_AHB4ENSETR</span> |= (1&lt;&lt;0);</span></span><br><span class="line"><span class="pattern-match"></span></span><br><span class="line"><span class="pattern-match">	</span></span><br><span class="line"><span class="pattern-match">	<span class="operator">/</span><span class="operator">*</span> configure pin <span class="keyword">as</span> gpio</span></span><br><span class="line"><span class="pattern-match">	 <span class="operator">*</span> configure gpio <span class="keyword">as</span> output </span></span><br><span class="line"><span class="pattern-match">	 <span class="operator">*</span><span class="operator">/</span></span></span><br><span class="line"><span class="pattern-match">	 </span></span><br><span class="line"><span class="pattern-match">	<span class="operator">*</span><span class="constructor">GPIO_MODER</span> &amp;= ~(3&lt;&lt;20);</span></span><br><span class="line"><span class="pattern-match">	<span class="operator">*</span><span class="constructor">GPIO_MODER</span> |= ~(1&lt;&lt;20);</span></span><br><span class="line"><span class="pattern-match">	</span></span><br><span class="line"><span class="pattern-match">	return 0;</span></span><br><span class="line"><span class="pattern-match">&#125;</span></span><br></pre></td></tr></table></figure>
<p>4、在led_write设置输出电平，由下图可知只需要操作b[10]与b[26]，写入1&#x2F;0来控制输出高低。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> <span class="type">ssize_t</span> <span class="title">led_write</span><span class="params">(<span class="keyword">struct</span> file *filp, <span class="type">const</span> <span class="type">char</span> __user *buf,</span></span></span><br><span class="line"><span class="params"><span class="function">			 <span class="type">size_t</span> count, <span class="type">loff_t</span> *ppos)</span></span></span><br><span class="line"><span class="function">			 </span>&#123;</span><br><span class="line">			 	<span class="type">char</span> val;</span><br><span class="line">			 	<span class="comment">/* copy_from_user : get data from app */</span></span><br><span class="line">				<span class="built_in">copy_from_user</span>(&amp;val, buf, <span class="number">1</span>);<span class="comment">//用户空间拷贝到内核空间，拷贝1个字节</span></span><br><span class="line">				</span><br><span class="line">				<span class="comment">/* to set gpio register: out 1/0 */</span></span><br><span class="line">				<span class="keyword">if</span>(val)&#123;</span><br><span class="line">					<span class="comment">/* set gpa10 to let led on */</span></span><br><span class="line">					*GPIO_BSRR = (<span class="number">1</span>&lt;&lt;<span class="number">26</span>);</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="comment">/* set gpa10 to let led off */</span></span><br><span class="line">					*GPIO_BSRR = (<span class="number">1</span>&lt;&lt;<span class="number">10</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			 &#125;</span><br></pre></td></tr></table></figure>
<p>至此，简单的led驱动编程框架就搭好了。</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/kernel.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/module.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/slab.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/init.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/fs.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/delay.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/poll.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/mutex.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/uaccess.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;asm/io.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/device.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> major;</span><br><span class="line"><span class="type">static</span> <span class="keyword">struct</span> <span class="title class_">class</span> *led_class;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* register */</span></span><br><span class="line"><span class="comment">//RCC_PLL4CR地址： 0x50000000 + 0x894</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *RCC_PLL4CR;</span><br><span class="line"></span><br><span class="line"><span class="comment">//RCC_MP_AHB4ENSETR 地址： 0x50000000 + 0xA28</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *RCC_MP_AHB4ENSETR;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//GPIO_MODER 地址： 0x50002000 + 0x00</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *GPIO_MODER;</span><br><span class="line"></span><br><span class="line"><span class="comment">//GPIO_BSRR 地址： 0x50002000 + 0x18</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">volatile</span> <span class="type">unsigned</span> <span class="type">int</span> *GPIO_BSRR;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">ssize_t</span> <span class="title">led_write</span><span class="params">(<span class="keyword">struct</span> file *filp, <span class="type">const</span> <span class="type">char</span> __user *buf,</span></span></span><br><span class="line"><span class="params"><span class="function">			 <span class="type">size_t</span> count, <span class="type">loff_t</span> *ppos)</span></span></span><br><span class="line"><span class="function">			 </span>&#123;</span><br><span class="line">			 	<span class="type">char</span> val;</span><br><span class="line">			 	<span class="comment">/* copy_from_user : get data from app */</span></span><br><span class="line">				<span class="built_in">copy_from_user</span>(&amp;val, buf, <span class="number">1</span>);<span class="comment">//用户空间拷贝到内核空间，拷贝1个字节</span></span><br><span class="line">				</span><br><span class="line">				<span class="comment">/* to set gpio register: out 1/0 */</span></span><br><span class="line">				<span class="keyword">if</span>(val)&#123;</span><br><span class="line">					<span class="comment">/* set gpa10 to let led on */</span></span><br><span class="line">					*GPIO_BSRR = (<span class="number">1</span>&lt;&lt;<span class="number">26</span>);</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="comment">/* set gpa10 to let led off */</span></span><br><span class="line">					*GPIO_BSRR = (<span class="number">1</span>&lt;&lt;<span class="number">10</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			 &#125;</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">led_open</span><span class="params">(<span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> file *filp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">/* enable PLL4,it is clock source for all gpio */</span></span><br><span class="line">	*RCC_PLL4CR |= (<span class="number">1</span>&lt;&lt;<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">while</span>((*RCC_PLL4CR &amp; (<span class="number">1</span>&lt;&lt;<span class="number">1</span>)) == <span class="number">0</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/* enable gpio */</span></span><br><span class="line">	*RCC_MP_AHB4ENSETR |= (<span class="number">1</span>&lt;&lt;<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="comment">/* configure pin as gpio</span></span><br><span class="line"><span class="comment">	 * configure gpio as output </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	 </span><br><span class="line">	*GPIO_MODER &amp;= ~(<span class="number">3</span>&lt;&lt;<span class="number">20</span>);</span><br><span class="line">	*GPIO_MODER |= ~(<span class="number">1</span>&lt;&lt;<span class="number">20</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="keyword">struct</span> <span class="title class_">file_operations</span> led_fops = &#123;</span><br><span class="line">	.owner		= THIS_MODULE,</span><br><span class="line">	.write		= led_write,</span><br><span class="line">	.open		= led_open,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 入口函数 */</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">int</span> __init <span class="title">led_init</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printk</span>(<span class="string">&quot;%s %s %d\n&quot;</span>, __FILE__ , __FUNCTION__,__LINE__);</span><br><span class="line">	major = <span class="built_in">register_chrdev</span>(<span class="number">0</span>, <span class="string">&quot;100ask_led&quot;</span>, &amp;led_fops);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* ioremap(base_phy, size); */</span></span><br><span class="line">	<span class="comment">//RCC_PLL4CR地址： 0x50000000 + 0x894</span></span><br><span class="line">	RCC_PLL4CR = <span class="built_in">ioremap</span>(<span class="number">0x50000000</span> + <span class="number">0x894</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//RCC_MP_AHB4ENSETR 地址： 0x50000000 + 0xA28</span></span><br><span class="line">	RCC_MP_AHB4ENSETR = <span class="built_in">ioremap</span>(<span class="number">0x50000000</span> + <span class="number">0xA28</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//GPIO_MODER 地址： 0x50002000 + 0x00</span></span><br><span class="line">	GPIO_MODER = <span class="built_in">ioremap</span>(<span class="number">0x50002000</span> + <span class="number">0x00</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//GPIO_BSRR 地址： 0x50002000 + 0x18</span></span><br><span class="line">	GPIO_BSRR = <span class="built_in">ioremap</span>(<span class="number">0x50002000</span> + <span class="number">0x18</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	led_class = <span class="built_in">class_create</span>(THIS_MODULE, <span class="string">&quot;myled&quot;</span>);</span><br><span class="line">	<span class="built_in">device_create</span>(led_class, <span class="literal">NULL</span>, <span class="built_in">MKDEV</span>(major, <span class="number">0</span>), <span class="literal">NULL</span>, <span class="string">&quot;myled&quot;</span>);<span class="comment">//能创建/led/myled的设备节点</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> __exit <span class="title">led_exit</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">iounmap</span>(RCC_PLL4CR);</span><br><span class="line">	<span class="built_in">iounmap</span>(RCC_MP_AHB4ENSETR);</span><br><span class="line">	<span class="built_in">iounmap</span>(GPIO_MODER);</span><br><span class="line">	<span class="built_in">iounmap</span>(GPIO_BSRR);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">device_destroy</span>(led_class, <span class="built_in">MKDEV</span>(major, <span class="number">0</span>));</span><br><span class="line">	<span class="built_in">class_destroy</span>(led_class);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">unregister_chrdev</span>(major, <span class="string">&quot;100ask_led&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module_init</span>(led_init);</span><br><span class="line"><span class="built_in">module_exit</span>(led_exit);</span><br><span class="line"><span class="built_in">MODULE_LICENSE</span>(<span class="string">&quot;GPL&quot;</span>);</span><br></pre></td></tr></table></figure>

<h1 id="C-学习"><a href="#C-学习" class="headerlink" title="C++学习"></a>C++学习</h1><h2 id="C-x2F-C-知识"><a href="#C-x2F-C-知识" class="headerlink" title="C&#x2F;C++知识"></a>C&#x2F;C++知识</h2><h3 id="起别名的结构体构造"><a href="#起别名的结构体构造" class="headerlink" title="起别名的结构体构造"></a>起别名的结构体构造</h3><p>typedef  给类型起别名<br>结构体   自定义的类型<br>用法：<br>关键字 名字{}</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种构造方式</span></span><br><span class="line"><span class="keyword">struct</span> student&#123;</span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="built_in">int</span> age;</span><br><span class="line">    <span class="built_in">string</span> hobby;</span><br><span class="line">&#125;;</span><br><span class="line">typedef student Stu1;<span class="comment">//起别名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种构造方式</span></span><br><span class="line">typedef <span class="keyword">struct</span> student&#123;</span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="built_in">int</span> age;</span><br><span class="line">    <span class="built_in">string</span> hobby;</span><br><span class="line">&#125;Stu2;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">main</span>()</span>&#123;</span><br><span class="line">    student zhangsan;</span><br><span class="line">    Stu1 zhangsan1;</span><br><span class="line">    Stu2 zhangsan2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以把student、Stu1和Stu2看成是同一个类型。</p>
<h3 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h3><p>16位操作系统的Int为2字节，32位操作系统int为4个字节，一个字节为8位，一个整型变量在计算机当中其实可以用32位的二进制来表示。<br>A &lt;&lt; B:表示A转化为二进制后，往左移动B位，高位丢弃，低位补0.<br>例：5 &lt;&lt; 1：5转为二进制0101，往左移1位，高位丢弃，低位补0，得1010。<br>A &gt;&gt; B:表示A转化为二进制后，对无符号数，往右移动B位，低位丢弃，高位补0.<br>例：6 &gt;&gt; 1：5转为二进制0110，往左移1位，低位补0，得0011。<br>A &amp; B ：A和B转为二进制，相对应的位如果都是1得1，其余都为0。<br>例：A &#x3D; 5，A二进制位0101，B &#x3D; 6，B二进制位：0110，A &amp; B &#x3D; 0100。<br>A | B ：A和B转为二进制，相对应的位如果有一位为1，那结果为1。<br>例：A &#x3D; 5，A二进制位0101，B &#x3D; 6，B二进制位：0110，A &amp; B &#x3D; 0111。<br>A ^ B ：异或运算符。A和B转为二进制，相对应的位相同结果为1，否则为1。<br>例：A &#x3D; 5，A二进制位0101，B &#x3D; 6，B二进制位：0110，A &amp; B &#x3D; 1100。</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~<span class="keyword">A</span> ：<span class="keyword">A</span>转为二进制，相对应的位取相反的值。</span><br><span class="line">例：<span class="keyword">A</span> = <span class="number">5</span>，<span class="keyword">A</span>二进制位<span class="number">0101</span>，~<span class="keyword">A</span> = <span class="number">1010</span>。 </span><br></pre></td></tr></table></figure>
<h3 id="static静态"><a href="#static静态" class="headerlink" title="static静态"></a>static静态</h3><p>1、static修饰全局变量，称之为静态全局变量。全局变量可以被一个工程下所有文件所调用，但静态全局变量只能被它所在的文件所调用，工程里其他的文件都不能调用。</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int a <span class="operator">=</span> <span class="number">0</span><span class="comment">;</span></span><br><span class="line">int main&#123;</span><br><span class="line">    return <span class="number">0</span><span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> main&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、static修饰局部变量，称之为静态局部变量。局部变量在函数结束后就会立即销毁，但是静态局部变量会依旧保存这个数，如果静态局部变量所在的函数再一次被调用时，这个静态局部变量的指是上次函数结束前保存的值，而不是函数初始化的那个值，也就是说，静态局部变量只能初始化一次。<br>3、static修饰函数，称之为静态函数，跟静态全局变量一样，函数可以被一个工程下所有文件所调用，但静态函数只能被它所在的文件所调用，工程里其他的文件都不能调用。</p>
<h3 id="形参与实参"><a href="#形参与实参" class="headerlink" title="形参与实参"></a>形参与实参</h3><p>c++函数传递叫值传递和地址传递，在主函数的都是实参，实际的参数，如果只是值传递，传到函数里的就是形参，形参里的a，b在fcn函数里完成了++步骤，但主函数里的a，b是没有任何变化，所以实参和形参是互不受影响。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fcn</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">    a++;</span><br><span class="line">    b++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; a&lt;&lt;<span class="string">&quot;   &quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">fcn</span>(a,b);</span><br><span class="line">    cout &lt;&lt; a &lt;&lt;<span class="string">&quot;   &quot;</span>&lt;&lt;b; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2022/09/22/internship01/cStudy01.jpg" class="" title="这是一张图片">
<p>如果是地址传递，那么主函数的实参是会受到影响。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fcn</span><span class="params">(<span class="type">int</span> &amp;a,<span class="type">int</span> &amp;b)</span></span>&#123;</span><br><span class="line">    a++;</span><br><span class="line">    b++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; a&lt;&lt;<span class="string">&quot;   &quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">fcn</span>(a,b);</span><br><span class="line">    cout &lt;&lt; a &lt;&lt;<span class="string">&quot;   &quot;</span>&lt;&lt;b; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2022/09/22/internship01/cStudy02.jpg" class="" title="这是一张图片">

<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p>构造函数的作用：初始化类对象的数据成员<br>一般分为：无参构造函数、一般构造函数和复制构造函数，这里主要介绍无参构造函数和一般构造函数。<br>无参构造函数顾名思义，没有传入参数的构造器。一般来说创造一个类，如果没写任何构造函数，系统会自动生成一个无参构造器，且函数为空，我们也可以自行编写一个无参构造函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">	<span class="keyword">public</span>: </span><br><span class="line">		<span class="type">int</span> m_age;</span><br><span class="line">		<span class="type">int</span> m_score;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">Student</span>()&#123;</span><br><span class="line">			m_age = <span class="number">0</span>;</span><br><span class="line">			m_score = <span class="number">100</span>;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;调用无参构造器&quot;</span>&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Student xiaoMing;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2022/09/22/internship01/cStudy03.jpg" class="" title="这是一张图片">
<p>一般构造器的写法为</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">	<span class="keyword">public</span>: </span><br><span class="line">		<span class="type">int</span> m_age;</span><br><span class="line">		<span class="type">int</span> m_score;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">Student</span>(<span class="type">int</span> age,<span class="type">int</span> score):<span class="built_in">m_age</span>(age),<span class="built_in">m_score</span>(score)&#123;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;调用Student(int age,int score)一般构造器&quot;</span>&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Student</span>(<span class="type">int</span> age)&#123;</span><br><span class="line">			m_age = age;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;调用Student(int age)一般构造器&quot;</span>&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Student <span class="title">xiaoMing</span><span class="params">(<span class="number">5</span>,<span class="number">100</span>)</span></span>;</span><br><span class="line">	<span class="function">Student <span class="title">pangHu</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2022/09/22/internship01/cStudy05.jpg" class="" title="这是一张图片">

<h2 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h2><h3 id="707-设计链表"><a href="#707-设计链表" class="headerlink" title="707. 设计链表"></a>707. 设计链表</h3><p>在链表类中实现这些功能：<br>get(index)：获取链表中第 index 个节点的值。如果索引无效，则返回-1。<br>addAtHead(val)：在链表的第一个元素之前添加一个值为 val 的节点。插入后，新节点将成为链表的第一个节点。<br>addAtTail(val)：将值为 val 的节点追加到链表的最后一个元素。<br>addAtIndex(index,val)：在链表中的第 index 个节点之前添加值为 val  的节点。如果 index 等于链表的长度，则该节点将附加到链表的末尾。如果 index 大于链表长度，则不会插入节点。如果index小于0，则在头部插入节点。<br>deleteAtIndex(index)：如果索引 index 有效，则删除链表中的第 index 个节点。</p>
<img src="/2022/09/22/internship01/MyLinkedList01.jpg" class="" title="这是一张图片">
<p>题解：<br>链表由一个个结点串联而成，结点本质上是结构体，这个结构体包含一个数值val和一个指针Next，通过指针Next指向下一个结点，也就是下一个结构体，Next如同一个链子把每个结点链接起来，构成了我们需要的链表<br>结点在C++里表现形式：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> LinkedList&#123;</span><br><span class="line">    <span class="built_in">int</span> <span class="keyword">val</span>;</span><br><span class="line">    LinkedList *next;</span><br><span class="line">    <span class="constructor">LinkedList(<span class="params">int</span> <span class="params">val</span>)</span>:<span class="keyword">val</span>(<span class="keyword">val</span>),next(nullptr)&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>结点创建后，再来实现每个函数。实现函数之前，我们要创建一个虚拟的头结点dummyNode,以及记录长度的数值size</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LinkedList *dummyNode <span class="operator">=</span> new LinkedList(<span class="number">0</span>)<span class="comment">;</span></span><br><span class="line">int size <span class="operator">=</span> <span class="number">0</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>①addAtHead(val)：在链表的第一个元素之前添加一个值为 val 的节点。插入后，新节点将成为链表的第一个节点。<br>这里用图形化的形式演示一下链表添加操作：</p>
<img src="/2022/09/22/internship01/LinkedList01.jpg" class="" title="这是一张图片">
<p>dummyNode-&gt;A-&gt;C-&gt;D-&gt;E。如果我们在头结点插入结点F，得到dummyNode-&gt;F-&gt;A-&gt;C-&gt;D-&gt;E。</p>
<img src="/2022/09/22/internship01/LinkedList02.jpg" class="" title="这是一张图片">
<p>那我们只需要更改dummyNode和F的Next就行了，所以具体代码为：</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">void addAtHead(int val) &#123;</span><br><span class="line">    LinkedList <span class="keyword">node</span> <span class="title">= new</span> LinkedList(val);</span><br><span class="line">    <span class="keyword">node</span><span class="title">-&gt;next</span> = dummyNode-&gt;next;</span><br><span class="line">    dummyNode-&gt;next = <span class="keyword">node</span><span class="title">;</span></span><br><span class="line"><span class="title">    size</span>++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>②addAtIndex(index,val)：在链表中的第 index 个节点之前添加值为 val  的节点。如果 index 等于链表的长度，则该节点将附加到链表的末尾。如果 index 大于链表长度，则不会插入节点。如果index小于0，则在头部插入节点。<br>这里用图形化的形式演示一下链表添加操作：</p>
<img src="/2022/09/22/internship01/LinkedList01.jpg" class="" title="这是一张图片">
<p>dummyNode-&gt;A-&gt;C-&gt;D-&gt;E。如果我们在D节点之前插入结点F，得到dummyNode-&gt;A-&gt;C-&gt;F-&gt;D-&gt;E。</p>
<img src="/2022/09/22/internship01/LinkedList03.jpg" class="" title="这是一张图片">
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> addAtIndex(<span class="built_in">int</span> <span class="keyword">index</span>,<span class="built_in">int</span> val) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">index</span> &gt; size) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LinkedNode *node = <span class="keyword">new</span> LinkedNode(val);</span><br><span class="line">    LinkedNode *cur = dummyHeadNode;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">index</span>--)&#123;</span><br><span class="line">        cur = cur-&gt;<span class="keyword">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    node-&gt;<span class="keyword">next</span> =cur-&gt;<span class="keyword">next</span>;</span><br><span class="line">    cur-&gt;<span class="keyword">next</span> = node;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>③addAtTail(val)：将值为 val 的节点追加到链表的最后一个元素。<br>这里用图形化的形式演示一下链表添加操作：</p>
<img src="/2022/09/22/internship01/LinkedList01.jpg" class="" title="这是一张图片">
<p>dummyNode-&gt;A-&gt;C-&gt;D-&gt;E。如果我们在末端插入结点F，得到dummyNode-&gt;A-&gt;C-&gt;D-&gt;E-&gt;F。</p>
<img src="/2022/09/22/internship01/LinkedList04.jpg" class="" title="这是一张图片">
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> addAtTail(<span class="keyword">int</span> val) &#123;</span><br><span class="line">    LinkedNode *node = <span class="keyword">new</span> LinkedNode(val);</span><br><span class="line">    LinkedNode *cur = dummyHeadNode;</span><br><span class="line">    <span class="keyword">while</span>(cur-&gt;<span class="keyword">next</span> != nullptr)&#123;</span><br><span class="line">        cur = cur-&gt;<span class="keyword">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cur-&gt;<span class="keyword">next</span> = node;</span><br><span class="line">    <span class="keyword">size</span>++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>④get(index)：获取链表中第 index 个节点的值。如果索引无效，则返回-1。<br>这里用图形化的形式演示一下链表添加操作：</p>
<img src="/2022/09/22/internship01/LinkedList01.jpg" class="" title="这是一张图片">
<p>dummyNode-&gt;A-&gt;C-&gt;D-&gt;E。如果我们想得到dummyNode-&gt;A-&gt;C-&gt;D-&gt;E。</p>
<img src="/2022/09/22/internship01/LinkedList04.jpg" class="" title="这是一张图片">
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> get(<span class="built_in">int</span> <span class="keyword">index</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">index</span> &lt; <span class="number">0</span> || <span class="keyword">index</span> &gt; size - <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LinkedNode *cur = dummyHeadNode-&gt;<span class="keyword">next</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">index</span>--)&#123;</span><br><span class="line">        cur = cur-&gt;<span class="keyword">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cur-&gt;val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>⑤deleteAtIndex(index)：如果索引 index 有效，则删除链表中的第 index 个节点。<br>这里用图形化的形式演示一下链表添加操作：</p>
<img src="/2022/09/22/internship01/LinkedList01.jpg" class="" title="这是一张图片">
<p>dummyNode-&gt;A-&gt;C-&gt;D-&gt;E。如果我们删除结点D，得到dummyNode-&gt;A-&gt;C-&gt;E。</p>
<img src="/2022/09/22/internship01/LinkedList05.jpg" class="" title="这是一张图片">
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> deleteAtIndex(<span class="built_in">int</span> <span class="keyword">index</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">index</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="keyword">index</span> &lt; size)&#123;</span><br><span class="line">        LinkedNode *cur = dummyHeadNode;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">index</span>--)&#123;</span><br><span class="line">            cur = cur-&gt;<span class="keyword">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedNode *temp = cur-&gt;<span class="keyword">next</span>;</span><br><span class="line">        cur-&gt;<span class="keyword">next</span> = temp-&gt;<span class="keyword">next</span>;</span><br><span class="line">        size--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="研二公司实习"><a href="#研二公司实习" class="headerlink" title="研二公司实习"></a>研二公司实习</h1><h2 id="ros安装"><a href="#ros安装" class="headerlink" title="ros安装"></a>ros安装</h2><p>工控机系统：Ubuntu 18.04<br>安装时间：2022.9.26<br>如果官网与本文代码有区别，请以官网为主。<br>打开两个网站：<br>英文ros官网：<a target="_blank" rel="noopener" href="http://wiki.ros.org/melodic/Installation/Ubuntu">http://wiki.ros.org/melodic/Installation/Ubuntu</a><br>中文ros官网：<a target="_blank" rel="noopener" href="http://wiki.ros.org/cn/melodic/Installation/Ubuntu">http://wiki.ros.org/cn/melodic/Installation/Ubuntu</a><br>第一步：<br>打开英文ros官网《1.2 Setup your sources.list》的Mirrors，设置我们所需要的镜像源，最好是选择清华源：</p>
<img src="/2022/09/22/internship01/1.2_Setup_sources01.jpg" class="" title="这是一张图片">
<img src="/2022/09/22/internship01/1.2_Setup_sources02.jpg" class="" title="这是一张图片">
<p>在ros终端输入：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh -c &#x27;. <span class="string">/etc/lsb-release</span> &amp;&amp; <span class="keyword">echo</span> <span class="string">&quot;deb http://mirrors.tuna.tsinghua.edu.cn/ros/ubuntu/ `lsb_release -cs` main&quot;</span> &gt; <span class="string">/etc/apt/sources.list.d/ros-latest.list</span>&#x27;</span><br></pre></td></tr></table></figure>
<p>第二步：<br>打开中文ros官网《1.3 设置密钥》</p>
<img src="/2022/09/22/internship01/1.3_02.jpg" class="" title="这是一张图片">
<p>在ros终端输入：</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">sudo</span> <span class="string">apt-key</span> <span class="string">adv</span> <span class="built_in">--keyserver</span> <span class="string">&#x27;hkp://keyserver.ubuntu.com:80&#x27;</span> <span class="built_in">--recv-key</span> <span class="string">C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654</span></span><br></pre></td></tr></table></figure>
<p>第三步：<br>打开英文ros官网《1.4 Installation》，依次在ros端执行：</p>
<img src="/2022/09/22/internship01/1.4Installation.jpg" class="" title="这是一张图片">
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo apt update</span></span><br></pre></td></tr></table></figure>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> ros-melodic-desktop</span><br></pre></td></tr></table></figure>
<p>因为对于公司产品Desktop Install已经够用，如果安装Desktop-Full Install比较耗时间。<br>第四步：<br>打开英文ros官网《1.6 Dependencies for building packages》，依次在ros端执行：</p>
<img src="/2022/09/22/internship01/1.6Dependencies.jpg" class="" title="这是一张图片">
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install <span class="keyword">python</span>-rosdep <span class="keyword">python</span>-rosinstall <span class="keyword">python</span>-rosinstall-generator <span class="keyword">python</span>-wstool build-essential</span><br></pre></td></tr></table></figure>
<p>之前装过ros系统，因为安装公司需要的文件会报错，所以重装了一遍ros。第一遍装ros时候是根据GSDN来装遇到的坑挺多的，第二遍按照官网给的流程一路装下来挺顺利（可能第一遍的时候把所有的问题都解决了所以第二遍就顺利很多）。最好是根据官网流程走一遍，遇到网络问题或者部分报错的问题还是可以找GSDN。</p>
<h2 id="ros学习"><a href="#ros学习" class="headerlink" title="ros学习"></a>ros学习</h2><p>ros里的节点，也就是node，相当于一个应用。比如一辆移动机器人，一个node操控底盘轮子的转动，一个node驱动摄像头获取图像，一个node驱动机械臂上的夹爪开合。一个软件包里可以有很多个可执行文件，可执行文件执行后就成了一个进程，这个进程就是node。<br>ros里launch，语法为：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch <span class="keyword">package</span> <span class="title">filename.launch</span></span><br></pre></td></tr></table></figure>
<p>比如：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch beginner_tutorials turtlemimic.<span class="built_in">launch</span></span><br></pre></td></tr></table></figure>
<p>turtlemimic.launch是放在beginner_tutorials包下，turtlemimic.launch文件集成了一堆参数和许多节点。如果一项工程，节点少的话，可以一一启动，但是大项目大工程的时候一个一个节点启动是非常麻烦的，所以只需运行.launch文件可以一键启动多个节点。<br>ros里的topic称之为话题。比如ros里有发布者Publisher和订阅者Subsriber,Publisher与Subsriber之间要负责通信如图</p>
<img src="/2022/09/22/internship01/TopicRos01.jpg" class="" title="这是一张图片">
<p>其中命令rostopic list的作用为能够列出所有当前订阅和发布的话题。<br>rostopic pub -1 topic msg_type args      可以把msg_type里的args数据发布到topic上。<br>rostopic echo &#x2F;topic_name      显示发布到主题的消息。  </p>
<h2 id="实习公司调试室外重载移动车步骤："><a href="#实习公司调试室外重载移动车步骤：" class="headerlink" title="实习公司调试室外重载移动车步骤："></a>实习公司调试室外重载移动车步骤：</h2><p>data：10&#x2F;12<br>基础软件文件下载：<br>Step1：<br>在Windows界面打开gitee网址：<a target="_blank" rel="noopener" href="https://gitee.com/dashboard%EF%BC%88%E4%B9%9F%E8%83%BD%E5%9C%A8Ubuntu%E5%86%85%E6%89%93%E5%BC%80%EF%BC%89%EF%BC%8C%E6%90%9C%E7%B4%A2rocr6">https://gitee.com/dashboard（也能在Ubuntu内打开），搜索rocr6</a></p>
<img src="/2022/09/22/internship01/ShenGu_DownLoad01.jpg" class="" title="这是一张图片">
<p>选择第一个</p>
<img src="/2022/09/22/internship01/ShenGu_DownLoad02.jpg" class="" title="这是一张图片">
<p>点进去，再点击zhwl_1981</p>
<img src="/2022/09/22/internship01/ShenGu_DownLoad03.jpg" class="" title="这是一张图片">
<p>点击complex_robot</p>
<img src="/2022/09/22/internship01/ShenGu_DownLoad04.jpg" class="" title="这是一张图片">
<p>Step2：<br>打开ubuntu18.04，在根目录打开终端。</p>
<img src="/2022/09/22/internship01/ShenGu_DownLoad05.jpg" class="" title="这是一张图片">
<p>依次输入Windows界面的gitee里的代码：</p>
<img src="/2022/09/22/internship01/ShenGu_DownLoad06.jpg" class="" title="这是一张图片">
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://gitee.com/zhwl_1981/complex_robot.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> complex_robot</span></span><br></pre></td></tr></table></figure>
<p>Step3：<br>在complex_robot文件下的终端依次输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./installRobot zeus_s2_rocr6_g3p.rosinstall</span><br><span class="line">./installRobot location_navigation.rosinstall</span><br></pre></td></tr></table></figure>
<p>基础软件包都安装完后，开始测试各个装置：夹爪、雷达和机械臂。<br>室外重载夹爪测试：<br>step1：<br>在ubuntu终端运行</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch g3p_driver hw_link.<span class="built_in">launch</span></span><br></pre></td></tr></table></figure>
<p>step2：<br>启动另外一个终端输入</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rostopic list</span></span><br></pre></td></tr></table></figure>
<p>显示</p>
<img src="/2022/09/22/internship01/ShenGu_DownLoad07.jpg" class="" title="这是一张图片">
<p>g3p话题为&#x2F;g3p_msgs&#x2F;gripper<br>继续输入：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rostopic pub -<span class="number">1</span> <span class="regexp">/g3p_msgs/g</span>ripper</span><br></pre></td></tr></table></figure>
<p>连续按两次TAB键补全信息 ，把后面的state:0.0改成state:1.回车后夹爪就会启动。<br>室外重载激光雷达测试：<br>在此目录下打开终端，运行</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch zeus_s2_bringup rplidar_ros.<span class="built_in">launch</span></span><br></pre></td></tr></table></figure>
<p>运行没有报错，而且激光雷达也正在转，说明测试成功。<br>如果想看的更清楚就在根目录下进入话题</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rostopic list</span></span><br></pre></td></tr></table></figure>
<p>雷达话题为&#x2F;scan，然后输入以下命令并回车执行</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rviz</span></span><br></pre></td></tr></table></figure>
<p>在此界面添加激光雷达LaserScan，话题引入&#x2F;scan，Global Options里的Fixed Frame为Laser。<br>室外重载视觉抓取演示：<br>在linux的根目录下输入指令：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./deepvision.sh</span><br><span class="line">roslaunch scene_tasks rocr6_pick_place.<span class="built_in">launch</span></span><br></pre></td></tr></table></figure>
<p>输入后在手柄上依次摁下a和y就能直接驱动机械臂抓取果实。<br>如果单独控制机械臂的话输入</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rostopic pub -<span class="number">1</span> <span class="regexp">/rocr6_msgs/g</span>oal_rocr6_msgs/Goal <span class="string">&quot;&#123;cmd: 0, a1: 0.0, a2: 0.0, a3: 0.0, a4: 0.0, a5: 0.0, a6: 0.0,&#125;&quot;</span></span><br></pre></td></tr></table></figure>
<p>其中a1~a6后面均为机械臂的弧度，如果想手动调整机械臂输入弧度即可。<br>室外重载导航演示：<br>Step1:建图<br>1、正常开机后，打开终端，输入roslaunch rplidar_ros rplidar_a3.launch，用于启动激光雷达；<br>2、新开一个终端，cd到google_ws文件夹下，输入roslaunch cartographer_ros backpack_2d.launch，启动建图程序；<br>3、新开一个终端，输入rviz，在打开的界面上添加&#x2F;map话题的接收显示，即可在rviz的界面上查看实时的建图效果。<br>4、使用手柄控制小车在待建图的区域行走，行走过程要平稳，不要突然停止和急转弯，以免影响建图效果。<br>5、行走结束后，在home文件下打开终端，输入命令 .&#x2F;savemap.sh 保存地图。可以在home文件夹下看到三个以.pbstream、.pgm和.yaml结尾的文件。关掉之前运行的rviz和roslaunch cartographer_ros backpack_2d.launch，打开以.yaml结尾的文件把&#x2F;home&#x2F;nvidia&#x2F;给删去保存。然后把.pgm和.yaml结尾的文件放在&#x2F;catkin_ws&#x2F;src&#x2F;slam_navigation&#x2F;control&#x2F;map下，两个文件名字改成hdmap.pgm和hdmap.yaml，进入hdmap.yaml把image的参数修改为hdmap.pgm。至此，建图完成。<br>Step2:发送导航相关指令<br>1、开启终端，输入指令：输入roslaunch rplidar_ros rplidar_a3.launch，启动激光雷达；（建图没关的话可以不用输入这指令）<br>2、新开终端，输入指令：roslaunch relocalization relocalization.launch, 开启定位程序。<br>3、新开终端，输入指令：roslaunch control control.launch,开启坐标变换程序。<br>4、新开终端，输入指令：rviz，点击左上角file,Home目录下的1.rviz文件。<br>5、新开终端，输入指令：roslaunch control move_base.launch，启动导航控制。<br>6、进入&#x2F;catkin_ws&#x2F;src&#x2F;slam_navigation&#x2F;zeus_s2_navigation&#x2F;scene&#x2F;param文件夹。打开points.yaml，修改点的数量以及位置。<br>7、新开终端，输入指令：roslaunch scene start.launch，启动任务。<br>8、此时导航程序已经全部启动，使用遥控手柄，再按B和Y键，小车即可进行自主导航。<br>注意事项：<br>建图过程中车需要慢慢开，尽量把地图周围扫面全面，方便后期导航能精准。</p>
<h1 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h1><h2 id="电脑卸载旧matlab产生的问题"><a href="#电脑卸载旧matlab产生的问题" class="headerlink" title="电脑卸载旧matlab产生的问题"></a>电脑卸载旧matlab产生的问题</h2><p>我电脑是装了matlab2018b和2020b，今天把2018b卸载后打开m代码是以Notepad++方式打开，在属性更改打开方式matlab2020b后，打开方式绑定的是[matlab starter application]。虽然打开m代码是2020b的界面，但每次打开新的m代码，就会新打开一个matlab程序。问题应该就是 [.m] 文件关联的是 [matlab starter application]，这应该就是导致双击 [.m] 文件新开 matlab 的原因。<br>解决方法：<br>Step1 打开网站：<br><a target="_blank" rel="noopener" href="https://ww2.mathworks.cn/matlabcentral/fileexchange/51165-matlab-file-association-shortcut-fix">https://ww2.mathworks.cn/matlabcentral/fileexchange/51165-matlab-file-association-shortcut-fix</a><br>下载此压缩包并解压</p>
<img src="/2022/09/22/internship01/OtherQuestion01.jpg" class="" title="这是一张图片">
<img src="/2022/09/22/internship01/OtherQuestion02.jpg" class="" title="这是一张图片">
<p>Step2 使用MATLAB运行associateFiles.m文件<br>Step3 然后会得到一个MatlabFileAssocFix.reg<br>Step4 运行MatlabFileAssocFix.reg注册文件并按确定<br>Step5 运行matlabshortcuts.bat<br>Step6 运行runmatlab.bat<br>完成后，文件关联问题应该得到了修复。</p>
<h2 id="matlab代码乱码问题"><a href="#matlab代码乱码问题" class="headerlink" title="matlab代码乱码问题"></a>matlab代码乱码问题</h2><p>m文件用Microsoft VS Code，点击右下角“UTF-8”</p>
<img src="/2022/09/22/internship01/OtherQuestion03.jpg" class="" title="这是一张图片">
<p>中间上方会出现两种选择，点击“通过编码重新打开”</p>
<img src="/2022/09/22/internship01/OtherQuestion04.jpg" class="" title="这是一张图片">
<p>搜索GBK，点击保存即可</p>
<img src="/2022/09/22/internship01/OtherQuestion05.jpg" class="" title="这是一张图片">


    </div>

    
    
    
    

    <div>
      
      <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

       
    </div>


    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/leetcode/" rel="tag"># leetcode</a>
              <a href="/tags/%E5%85%AC%E5%8F%B8%E5%AE%9E%E4%B9%A0/" rel="tag"># 公司实习</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/06/27/record08/" rel="prev" title="Third learning record in June">
                  <i class="fa fa-chevron-left"></i> Third learning record in June
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/10/30/internship02/" rel="next" title="Second Study Record of internship">
                  Second Study Record of internship <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">MErr0r</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"\u003cyour disqus shotname>","count":false,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body>
</html>
